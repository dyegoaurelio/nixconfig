From: NixOS local <nixos@localhost>
Subject: [PATCH] wifi: mt76: mt7921: extract regs local variable in pci probe

Preparatory patch for MT7902 series: extract pcim_iomap_table(pdev)[0]
into a local `regs` variable to match the upstream tree the MT7902
patches target.

---
 drivers/net/wireless/mediatek/mt76/mt7921/pci.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/net/wireless/mediatek/mt76/mt7921/pci.c b/drivers/net/wireless/mediatek/mt76/mt7921/pci.c
--- a/drivers/net/wireless/mediatek/mt76/mt7921/pci.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7921/pci.c
@@ -275,6 +275,7 @@ static int mt7921_pci_probe(struct pci_dev *pdev,
 	struct mt792x_dev *dev;
 	struct mt76_dev *mdev;
 	u16 cmd, chipid;
+	void __iomem *regs;
 	u8 features;
 	int ret;

@@ -325,7 +326,8 @@ static int mt7921_pci_probe(struct pci_dev *pdev,
 	dev->fw_features = features;
 	dev->hif_ops = &mt7921_pcie_ops;
 	dev->irq_map = &irq_map;
-	mt76_mmio_init(&dev->mt76, pcim_iomap_table(pdev)[0]);
+	regs = pcim_iomap_table(pdev)[0];
+	mt76_mmio_init(&dev->mt76, regs);
 	tasklet_init(&mdev->irq_tasklet, mt792x_irq_tasklet, (unsigned long)dev);

 	dev->phy.dev = dev;
